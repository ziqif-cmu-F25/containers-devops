# ============================================================
# Global settings (overridden by values-gcp.yaml / values-azure.yaml)
# ============================================================
global:
  environment: "gcp"   # "gcp" or "azure"

weCloud:
  imageRegistry:
    gcp: "us-east1-docker.pkg.dev/gcp-docker-kubernetes-487305"
    # active: the registry actually used by deployment templates.
    # Override in values-gcp.yaml / values-azure.yaml as needed.
    active: "us-east1-docker.pkg.dev/gcp-docker-kubernetes-487305"

# ============================================================
# Profile Service
# ============================================================
profile:
  releaseName: "profile"
  replicaCount: 1
  repository: "profile-service-repo"
  image: "profile-service"
  tag: "task3-20260214-194416"
  imagePullPolicy: "IfNotPresent"
  service:
    type: "NodePort"
    port: 80
    targetPort: 8080
  mysql:
    host: "mysql-profile"
    # Matches the already-deployed mysql-profile release credentials
    user: "profileuser"
    password: "UserPassword123"
    database: "test"
    port: "3306"
  hpa:
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 50
    cpuRequest: "200m"

# ============================================================
# Chat Service (group-chat-service) â€” deployed on GCP only
# ============================================================
chat:
  releaseName: "chat"
  replicaCount: 1
  repository: "profile-service-repo"
  image: "chat-service-repo/chat-service"
  tag: "latest"
  imagePullPolicy: "IfNotPresent"
  # This value should be used in configMap-chat.yaml
  # For multi-cloud: set to the Azure ingress external IP so chat on GCP
  # can reach profile on Azure. Comma-separated for multiple endpoints.
  profileEndpoints: "spring-profile-service.default.svc.cluster.local"
  service:
    type: "NodePort"
    port: 80
    targetPort: 8080
  mysql:
    host: "mysql-chat"
    user: "chatuser"
    password: "ChatPassword123"
    port: "3306"
  hpa:
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 50
    cpuRequest: "200m"

# ============================================================
# Login Service
# ============================================================
login:
  releaseName: "login"
  replicaCount: 1
  repository: "profile-service-repo"
  image: "login-service-repo/login-service"
  tag: "latest"
  imagePullPolicy: "IfNotPresent"
  service:
    type: "NodePort"
    port: 80
    targetPort: 8080
  mysql:
    host: "mysql-login"
    user: "loginuser"
    password: "LoginPassword123"
    port: "3306"
  hpa:
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 50
    cpuRequest: "200m"

# ============================================================
# Ingress
# ============================================================
ingress:
  # TODO: After deploying, find the NGINX ingress controller external IP:
  #   kubectl get services -n ingress-nginx
  # Then upgrade the release with the actual IP:
  #   helm upgrade wecloud ./helm --set ingress.externalIp=<EXTERNAL_IP>
  externalIp: "PENDING_EXTERNAL_IP"

# Below are the values used in the redis service
# DO NOT MODIFY
redis:
  image: "redis:7"
  host: "redis-service"
  password: "SuperSecretRedisPassword"
  passwordSecret: "redis-secret"
  passwordKey: "REDIS_PASSWORD"
  port: "6379"
  containerPort: 6379
  topic: "/topic/messages"
  service:
    port: 6379
    targetPort: 6379
